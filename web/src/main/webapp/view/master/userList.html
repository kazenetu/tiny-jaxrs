<style type="text/css">
td
{
    padding-top:0.25em;
    padding-bottom:0.25em;
    vertical-align: middle;
}
</style>

<div class="height-100percent" data-ng-init="ctrl.init()" data-ng-controller="userListController as ctrl">
    <!-- ヘッダー -->
    <header data-on-send-root="ctrl.sendRootHeader(src)"></header>

    <!-- メイン画面 -->
    <div  class="container main-area" data-ng-cloak >
        <!-- ボタン類 -->
        <div class="form-group buttons-row">
            <input type="button" class="btn" data-ng-click="ctrl.back()"  value="戻る">
            <div class="pull-right">
                <input type="button" class="btn" data-ng-click="ctrl.create()"  value="新規作成">
            </div>
        </div>
        <hr>

        <div class="scroll-area">
            <!-- 検索条件 -->
            <form class="form-inline">
                <div class="form-group">
                    <label for="searchUserId">ユーザーID</label>
                    <input type="text" id = "searchUserId"  data-ng-model="ctrl.searchUserId">
                </div>
            </form>

            <!-- ボタン類 -->
            <div class="form-group buttons-row">
                <div class="pull-right">
                    <form action="api/user/download" method="POST" style="float:left;padding-right:1em;">
                        <input type="hidden" name="userId" value={{ctrl.userId}}>
                        <input type="hidden" name="userName" value={{ctrl.userName}}>

                        <input type="submit" class="btn" value="CSV出力">
                    </form>
                    <form action="api/user/downloadPDF" method="POST" style="float:left;padding-right:1em;">
                        <input type="hidden" name="userId" value={{ctrl.userId}}>
                        <input type="hidden" name="userName" value={{ctrl.userName}}>

                        <input type="submit" class="btn" value="PDF出力">

                    </form>
                    <input type="button" class="btn" data-ng-click="ctrl.search(0)"  value="検索">
                </div>
            </div>

            <!-- 検索結果 -->
            <pager total-page={{ctrl.totalPage}} on-paging="ctrl.paging(pageIndex,sender)" on-send-root="ctrl.sendRoot(src)" />

            <table class="table table-bordered">
                <tr class="success">
                    <th class="text-center" style="width:10em;">
                        <button type="button" class="btn-link" data-ng-disabled="ctrl.searchResult === null" data-ng-click="ctrl.changeSort('USER_ID')">
                            ID
                            <span data-ng-show="ctrl.sortKey==='USER_ID' && ctrl.searchResult !== null">
                                <span data-ng-show="ctrl.sortType==='ASC'">▲</span>
                                <span data-ng-show="ctrl.sortType==='DESC'">▼</span>
                            </span>
                        </button>
                    </th>
                    <th class="text-center" style="width:30em;">
                        <button type="button" class="btn-link" data-ng-disabled="ctrl.searchResult === null" data-ng-click="ctrl.changeSort('NAME')">
                            名前
                            <span data-ng-show="ctrl.sortKey==='NAME' && ctrl.searchResult !== null">
                                <span data-ng-show="ctrl.sortType==='ASC'">▲</span>
                                <span data-ng-show="ctrl.sortType==='DESC'">▼</span>
                            </span>
                        </button>
                    </th>
                    <th class="text-center" style="width:10em;">
                        <button type="button" class="btn-link" data-ng-disabled="ctrl.searchResult === null" data-ng-click="ctrl.changeSort('PASSWORD')">
                            パスワード
                            <span data-ng-show="ctrl.sortKey==='PASSWORD' && ctrl.searchResult !== null">
                                <span data-ng-show="ctrl.sortType==='ASC'">▲</span>
                                <span data-ng-show="ctrl.sortType==='DESC'">▼</span>
                            </span>
                        </button>
                    </th>
                    <th class="text-center" style="width:7em;">
                        <button type="button" class="btn-link" data-ng-disabled="ctrl.searchResult === null" data-ng-click="ctrl.changeSort('date_data')">
                            Date
                            <span data-ng-show="ctrl.sortKey==='date_data' && ctrl.searchResult !== null">
                                <span data-ng-show="ctrl.sortType==='ASC'">▲</span>
                                <span data-ng-show="ctrl.sortType==='DESC'">▼</span>
                            </span>
                        </button>
                    </th>
                    <th class="text-center" style="width:7em;">
                        <button type="button" class="btn-link" data-ng-disabled="ctrl.searchResult === null" data-ng-click="ctrl.changeSort('time_data')">
                            Time
                            <span data-ng-show="ctrl.sortKey==='time_data' && ctrl.searchResult !== null">
                                <span data-ng-show="ctrl.sortType==='ASC'">▲</span>
                                <span data-ng-show="ctrl.sortType==='DESC'">▼</span>
                            </span>
                        </button>
                    </th>
                    <th class="text-center" style="width:7em;">
                        <button type="button" class="btn-link" data-ng-disabled="ctrl.searchResult === null" data-ng-click="ctrl.changeSort('ts_data')">
                            TS
                            <span data-ng-show="ctrl.sortKey==='ts_data' && ctrl.searchResult !== null">
                                <span data-ng-show="ctrl.sortType==='ASC'">▲</span>
                                <span data-ng-show="ctrl.sortType==='DESC'">▼</span>
                            </span>
                        </button>
                    </th>
                    <th class="text-center" style="width:5em;">
                        変更
                    </th>
                </tr>
                <tr  data-ng-repeat="result in ctrl.searchResult">
                    <td class="text-center">
                        {{result.id}}
                    </td>
                    <td class="text-left">
                        {{result.name}}
                    </td>
                    <td class="text-left">
                        {{result.password}}
                    </td>

                    <td class="text-left">
                        {{result.date | date:'yyyy/MM/dd' }}
                    </td>
                    <td class="text-left">
                        {{result.time | date:'hh:mmm'}}
                    </td>
                    <td class="text-left">
                        {{result.ts | date:'yyyy/MM/dd HH:mm:ss':'+0900'}}
                    </td>

                    <td class="text-center">
                        <button class="btn btn-sm" data-ng-click="ctrl.edit(result.id)">編集</button>
                    </td>
                </tr>
            </table>

            <pager total-page={{ctrl.totalPage}} on-paging="ctrl.paging(pageIndex,sender)" on-send-root="ctrl.sendRoot(src)" />
        </div>
    </div>
</div>
